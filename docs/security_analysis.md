# Task Nexus 便携版防破解分析报告

## 1. 风险评估结论

**结论：当前版本存在较高的破解风险。**

虽然便携版（Tauri v2）将核心逻辑编译为 Native Code (Rust)，比 Electron 的源码裸奔要安全得多，且开启了 `strip=true` 去除了符号表，但仍存在一个**致命弱点**：**对称加密密钥硬编码**。

### 核心漏洞分析
目前使用的是 **HMAC-SHA256** 对称加密算法，其安全性完全依赖于密钥 (`LICENSE_SECRET`) 的保密性。
但在 `security.rs` 中：
```rust
const LICENSE_SECRET: &str = "TN_2024_K7x9Qm3Wp5Yz8Rv2";
```
这个字符串以**明文形式**存在于最终生成的 `.exe` 文件中。

### 攻击者破解流程
1. **提取密钥**：攻击者只需使用简单的工具（如 `strings` 或十六进制编辑器）搜索 "TN_" 开头的字符串，就能直接找到密钥。
2. **制作注册机**：拿到密钥后，攻击者可以使用与你完全相同的算法（HMAC-SHA256）制作 "注册机"（KeyGen）。
3. **分发破解**：攻击者发布注册机，任何用户都可以输入自己的机器码，生成合法的激活码。

---

## 2. 改进方案：非对称加密 (推荐)

要解决这个问题，**必须弃用对称加密，改用非对称加密（RSA 或 Ed25519）。**

### 原理
*   **私钥 (Private Key)**：保存在你（卖家）手中，用于**生成**激活码（签名）。
*   **公钥 (Public Key)**：内置在软件中，用于**验证**激活码。

### 优势
即使黑客反编译了软件并提取了**公钥**，他们也**无法生成**有效的激活码，因为生成激活码需要**私钥**，而私钥从未出现在用户的电脑上。

### 实施步骤
1.  **生成密钥对**：生成一对 Ed25519 密钥（公钥+私钥）。
2.  **更新软件**：将 `LICENSE_SECRET` 替换为 `PUBLIC_KEY`。
3.  **更新生成器**：`license-generator.js` 使用 `PRIVATE_KEY` 对机器码进行签名。
4.  **更新验证逻辑**：`security.rs` 使用 `PUBLIC_KEY` 验证签名的合法性。

---

## 3. 建议

如果您希望提高软件的安全性，我强烈建议立即**升级到非对称加密方案**。这可以在不依赖联网验证的情况下，最大程度地防止注册机的出现。

**是否需要我为您实施这套非对称加密方案？**
